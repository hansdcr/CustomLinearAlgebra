# 线性代数知识点索引

本文档建立线性代数概念与代码实现的映射关系,方便快速查找和复习。

## 使用方法

- 按**数学概念**查找: 在目录中找到概念,查看对应的迭代和代码位置
- 按**应用场景**查找: 查看"应用场景索引"部分
- 按**代码模块**查找: 查看"代码组织"部分

---

## 目录

1. [向量 (Vector)](#向量-vector)
2. [矩阵 (Matrix)](#矩阵-matrix)
3. [线性变换 (Linear Transformation)](#线性变换-linear-transformation)
4. [坐标系统 (Coordinate Systems)](#坐标系统-coordinate-systems)
5. [投影 (Projection)](#投影-projection)
6. [四元数 (Quaternion)](#四元数-quaternion)
7. [高级主题](#高级主题)

---

## 向量 (Vector)

### 基础概念

| 概念 | 数学符号 | 迭代 | 代码位置 | VR/XR应用 |
|------|---------|------|---------|-----------|
| 向量定义 | **v** = (x, y) | 迭代1 | `src/core/vector2d.py:Vector2D` | 位置、速度、方向 |
| 向量的模(长度) | \|\|**v**\|\| | 迭代1 | `Vector2D.magnitude()` | 距离计算、速度大小 |
| 单位向量 | **v̂** | 迭代1 | `Vector2D.normalize()` | 纯方向表示 |
| 零向量 | **0** | 迭代1 | `Vector2D(0, 0)` | 静止状态 |

### 向量运算

| 运算 | 数学符号 | 迭代 | 代码位置 | 几何意义 | VR应用示例 |
|------|---------|------|---------|---------|-----------|
| 向量加法 | **a** + **b** | 迭代2 | `__add__` | 平行四边形法则 | 位置 + 位移 = 新位置 |
| 向量减法 | **a** - **b** | 迭代2 | `__sub__` | 从b指向a的向量 | 目标位置 - 当前位置 = 移动方向 |
| 数乘 | k**v** | 迭代2 | `__mul__` | 缩放向量长度 | 速度 × 时间 = 位移 |
| 点积(内积) | **a** · **b** | 迭代3 | `dot()` | 投影×模,夹角相关 | 视野判断、角度计算 |
| 叉积(外积) | **a** × **b** | 迭代5 | `cross()` (仅3D) | 垂直向量,右手法则 | 法线计算、左右判断 |

### 点积应用

| 应用 | 数学表达 | 迭代 | 代码示例 | 使用场景 |
|------|---------|------|---------|---------|
| 判断夹角 | cos(θ) = (**a**·**b**) / (\|\|**a**\|\| \|\|**b**\|\|) | 迭代3 | `angle()` | AI视野检测 |
| 判断垂直 | **a** · **b** = 0 | 迭代3 | `is_perpendicular()` | 表面检测 |
| 判断同向/反向 | **a** · **b** > 0 或 < 0 | 迭代3 | - | 物体朝向判断 |
| 投影 | proj = (**a**·**b̂**)**b̂** | 迭代3 | `project_onto()` | 力的分解 |
| 距离平方 | d² = (**a**-**b**)·(**a**-**b**) | 迭代3 | - | 快速距离比较 |

### 叉积应用

| 应用 | 数学表达 | 迭代 | 代码示例 | 使用场景 |
|------|---------|------|---------|---------|
| 计算法线 | **n** = (**e1** × **e2**).normalize() | 迭代5 | - | 三角形法线、光照 |
| 判断左右 | (**forward** × **to_target**).y | 迭代5 | - | AI转向判断 |
| 计算面积 | Area = \|\|**a** × **b**\|\| / 2 | 迭代5 | - | 三角形面积 |
| 构建坐标系 | **right** = **up** × **forward** | 迭代30 | - | 相机坐标系 |

### 3D向量特有

| 概念 | 迭代 | 代码位置 | 说明 |
|------|------|---------|------|
| 3D坐标系 | 迭代4 | `src/core/vector3d.py` | 左手系vs右手系 |
| 叉积 | 迭代5 | `Vector3D.cross()` | 仅在3D中有意义 |
| 球面坐标 | 迭代(扩展) | - | (r, θ, φ)表示 |

---

## 矩阵 (Matrix)

### 基础概念

| 概念 | 符号 | 迭代 | 代码位置 | 说明 |
|------|------|------|---------|------|
| 矩阵定义 | **M** ∈ ℝᵐˣⁿ | 迭代11 | `src/core/matrix.py:Matrix` | m行n列 |
| 单位矩阵 | **I** | 迭代11 | `Matrix.identity(n)` | 对角线为1,其余为0 |
| 零矩阵 | **0** | 迭代11 | `Matrix.zeros(m,n)` | 所有元素为0 |
| 转置 | **Mᵀ** | 迭代11 | `transpose()` | 行列互换 |
| 行列式 | det(**M**) | 迭代21 | `determinant()` | 空间缩放因子 |
| 逆矩阵 | **M⁻¹** | 迭代21 | `inverse()` | **M** × **M⁻¹** = **I** |
| 正交矩阵 | **Mᵀ** = **M⁻¹** | 迭代22 | - | 旋转矩阵的性质 |

### 矩阵运算

| 运算 | 符号 | 迭代 | 代码位置 | 复杂度 | 注意事项 |
|------|------|------|---------|--------|---------|
| 矩阵加法 | **A** + **B** | 迭代11 | `__add__` | O(mn) | 要求同型矩阵 |
| 矩阵乘法 | **A** × **B** | 迭代11 | `__mul__` | O(mnp) | 不满足交换律! |
| 矩阵-向量乘 | **M****v** | 迭代11 | `multiply_vector()` | O(mn) | 线性变换的本质 |
| 数乘 | k**M** | 迭代11 | `__mul__` (scalar) | O(mn) | 标量乘法 |

### 特殊矩阵

| 类型 | 定义 | 迭代 | 性质 | 应用 |
|------|------|------|------|------|
| 对角矩阵 | 只有对角线非零 | 迭代(扩展) | 易求逆 | 缩放变换 |
| 对称矩阵 | **M** = **Mᵀ** | 迭代41 | 特征值实数 | 协方差矩阵 |
| 反对称矩阵 | **M** = -**Mᵀ** | - | - | 叉积的矩阵形式 |
| 正交矩阵 | **M****Mᵀ** = **I** | 迭代22 | 保持长度和角度 | 旋转矩阵 |

---

## 线性变换 (Linear Transformation)

### 2D变换

| 变换类型 | 矩阵形式 (2×2) | 迭代 | 代码位置 | 效果 |
|---------|---------------|------|---------|------|
| 旋转 | [cos -sin; sin cos] | 迭代12 | `rotation_matrix_2d()` | 逆时针旋转θ |
| 缩放 | [sx 0; 0 sy] | 迭代13 | `scale_matrix_2d()` | x和y方向缩放 |
| 剪切X | [1 shx; 0 1] | 迭代13 | `shear_matrix_2d()` | 横向推动 |
| 剪切Y | [1 0; shy 1] | 迭代13 | `shear_matrix_2d()` | 纵向推动 |
| 镜像X | [1 0; 0 -1] | 迭代(扩展) | - | 水平翻转 |
| 镜像Y | [-1 0; 0 1] | 迭代(扩展) | - | 垂直翻转 |

### 齐次坐标变换 (3×3)

| 变换 | 矩阵形式 | 迭代 | 说明 |
|------|---------|------|------|
| 2D旋转 | [cos -sin 0; sin cos 0; 0 0 1] | 迭代15 | 齐次坐标版本 |
| 2D平移 | [1 0 tx; 0 1 ty; 0 0 1] | 迭代15 | **只能用齐次坐标** |
| 组合变换 | **M** = **T** × **R** × **S** | 迭代14 | 右乘顺序 |

### 3D变换 (4×4)

| 变换 | 迭代 | 代码位置 | 用途 |
|------|------|---------|------|
| 绕X轴旋转 | 迭代16 | `rotation_x()` | Pitch(俯仰) |
| 绕Y轴旋转 | 迭代16 | `rotation_y()` | Yaw(偏航) |
| 绕Z轴旋转 | 迭代16 | `rotation_z()` | Roll(翻滚) |
| 绕任意轴旋转 | 迭代(扩展) | `rotation_axis()` | Rodrigues公式 |
| 3D缩放 | 迭代16 | `scale_matrix_3d()` | 各轴独立缩放 |
| 3D平移 | 迭代16 | `translation_matrix_3d()` | 位置变换 |

### 欧拉角

| 概念 | 迭代 | 说明 | 问题 |
|------|------|------|------|
| 欧拉角(Pitch/Yaw/Roll) | 迭代17 | 用三个角度表示旋转 | 万向锁问题 |
| 旋转顺序 | 迭代17 | XYZ, ZYX等12种 | 顺序不同结果不同 |
| 万向锁 | 迭代17 | 两轴重合,损失自由度 | 用四元数解决 |

---

## 坐标系统 (Coordinate Systems)

### 坐标空间

| 空间 | 英文 | 迭代 | 变换矩阵 | 说明 |
|------|------|------|---------|------|
| 模型空间 | Model Space | 迭代26 | - | 物体自身坐标系 |
| 世界空间 | World Space | 迭代26 | Model Matrix | 场景统一坐标系 |
| 视图空间 | View Space | 迭代27 | View Matrix | 以相机为中心 |
| 裁剪空间 | Clip Space | 迭代28 | Projection Matrix | 投影后的空间 |
| 标准化设备坐标 | NDC | 迭代28 | - | [-1,1]³立方体 |
| 屏幕空间 | Screen Space | 迭代28 | Viewport Transform | 像素坐标 |

### 变换管线

```
模型坐标 --[Model]-> 世界坐标 --[View]-> 视图坐标 --[Projection]-> 裁剪坐标 --[/w]-> NDC --[Viewport]-> 屏幕坐标
```

| 阶段 | 迭代 | 矩阵 | 作用 |
|------|------|------|------|
| Model Transform | 迭代26 | **M** | 物体摆放位置 |
| View Transform | 迭代27 | **V** | 相机位置和朝向 |
| Projection | 迭代28-29 | **P** | 3D投影到2D |
| MVP矩阵 | 迭代31 | **P****V****M** | 完整变换 |

### 相机系统

| 概念 | 迭代 | 代码位置 | 说明 |
|------|------|---------|------|
| LookAt矩阵 | 迭代27 | `look_at()` | 相机朝向目标点 |
| 视图矩阵 | 迭代27 | `view_matrix()` | 世界→视图变换 |
| 正交基 | 迭代27 | forward/right/up | 相机坐标系的三个轴 |
| FOV (视场角) | 迭代28 | - | 相机看到的角度范围 |
| 近/远裁剪面 | 迭代30 | - | 渲染范围限制 |

---

## 投影 (Projection)

### 投影类型

| 类型 | 迭代 | 代码位置 | 特点 | 应用 |
|------|------|---------|------|------|
| 正交投影 | 迭代29 | `orthographic_projection()` | 平行线保持平行 | 建模软件、2D游戏 |
| 透视投影 | 迭代28 | `perspective_projection()` | 近大远小 | 3D游戏、VR |
| 向量投影 | 迭代3 | `Vector.project_onto()` | 投影到另一向量 | 力的分解 |

### 透视投影参数

| 参数 | 符号 | 作用 | 典型值 |
|------|------|------|--------|
| 视场角 | FOV | 视野宽度 | 60°-90° |
| 宽高比 | aspect | 屏幕比例 | 16:9 ≈ 1.78 |
| 近平面 | near | 最近可见距离 | 0.1 |
| 远平面 | far | 最远可见距离 | 1000 |

### 透视除法

| 概念 | 迭代 | 公式 | 说明 |
|------|------|------|------|
| 齐次坐标 | 迭代15 | (x, y, z, w) | w ≠ 1 |
| 透视除法 | 迭代28 | (x/w, y/w, z/w) | 转换为3D坐标 |
| w分量 | 迭代28 | w = -z | 深度信息 |

---

## 四元数 (Quaternion)

### 基础概念

| 概念 | 迭代 | 代码位置 | 表示 |
|------|------|---------|------|
| 四元数定义 | 迭代36 | `src/core/quaternion.py` | q = w + xi + yj + zk |
| 单位四元数 | 迭代36 | `normalize()` | \|\|q\|\| = 1 |
| 四元数乘法 | 迭代37 | `__mul__` | 组合旋转 |
| 共轭 | 迭代36 | `conjugate()` | q* = w - xi - yj - zk |
| 逆 | 迭代36 | `inverse()` | q⁻¹ = q* / \|\|q\|\|² |

### 旋转表示

| 操作 | 迭代 | 代码位置 | 说明 |
|------|------|---------|------|
| 轴角→四元数 | 迭代37 | `from_axis_angle()` | 绕axis旋转angle |
| 四元数→矩阵 | 迭代37 | `to_matrix()` | 转为4×4旋转矩阵 |
| 欧拉角→四元数 | 迭代39 | `from_euler()` | Pitch/Yaw/Roll |
| 四元数→欧拉角 | 迭代39 | `to_euler()` | 反向转换 |

### 插值

| 方法 | 迭代 | 代码位置 | 特点 | 用途 |
|------|------|---------|------|------|
| Lerp | 迭代38 | `lerp()` | 线性插值 | 简单但不均匀 |
| Slerp | 迭代38 | `slerp()` | 球面插值 | 平滑旋转动画 |
| Nlerp | 迭代38 | `nlerp()` | 归一化线性插值 | 近似Slerp,更快 |

### 四元数优势

| 问题 | 欧拉角 | 四元数 | 迭代 |
|------|--------|--------|------|
| 万向锁 | ✗ 存在 | ✓ 无此问题 | 迭代40 |
| 插值 | ✗ 不均匀 | ✓ 平滑 | 迭代38 |
| 内存 | 3个float | 4个float | - |
| 直观性 | ✓ 易理解 | ✗ 抽象 | - |

---

## 高级主题

### 特征值与特征向量

| 概念 | 迭代 | 数学表达 | 应用 |
|------|------|---------|------|
| 特征值 | 迭代41 | **A****v** = λ**v** | 主方向的缩放因子 |
| 特征向量 | 迭代41 | 对应λ的**v** | 不变的方向 |
| 特征分解 | 迭代42 | **A** = **Q****Λ****Q⁻¹** | 对角化 |
| 谱分解 | 迭代42 | 对称矩阵的特征分解 | PCA |

### 矩阵分解

| 分解类型 | 迭代 | 公式 | 用途 |
|---------|------|------|------|
| LU分解 | 迭代24 | **A** = **L****U** | 线性方程组求解 |
| QR分解 | 迭代(扩展) | **A** = **Q****R** | 特征值计算 |
| SVD | 迭代43 | **A** = **U****Σ****Vᵀ** | 降维、压缩 |
| Cholesky | 迭代(扩展) | **A** = **L****Lᵀ** | 正定矩阵分解 |

### 降维与分析

| 技术 | 迭代 | 原理 | 应用 |
|------|------|------|------|
| PCA | 迭代44 | 特征值分解 | 数据降维 |
| SVD降维 | 迭代43 | 奇异值分解 | 图像压缩 |
| 最小二乘 | 迭代25 | 伪逆 | 曲线拟合 |

---

## 应用场景索引

### VR/XR开发

| 应用场景 | 涉及知识点 | 迭代 | 代码示例 |
|---------|-----------|------|---------|
| 头显位置追踪 | 3D向量、位置更新 | 迭代4 | `position = position + velocity * dt` |
| 手柄朝向 | 旋转矩阵、四元数 | 迭代37 | `controller.rotation = quaternion` |
| 双目渲染 | 透视投影、相机偏移 | 迭代28 | 左右眼不同view矩阵 |
| 传送预瞄 | 抛物线、投影 | 迭代6 | 粒子系统模拟 |
| 空间音频 | 向量距离、方向 | 迭代3 | `(listener_pos - source_pos).normalize()` |
| UI交互 | 射线-平面相交 | 迭代30 | 射线投射 |
| 物理抓取 | 逆变换 | 迭代21 | 手柄坐标→物体坐标 |

### 游戏开发

| 应用场景 | 涉及知识点 | 迭代 | 代码示例 |
|---------|-----------|------|---------|
| 角色移动 | 向量加法 | 迭代2 | `pos = pos + direction * speed * dt` |
| 相机跟随 | LookAt、Lerp | 迭代27 | 平滑跟随玩家 |
| 敌人AI视野 | 点积、夹角 | 迭代3 | `if forward.dot(to_player) > 0.5` |
| 碰撞检测 | 叉积、投影 | 迭代5,47 | 分离轴定理 |
| 角色动画 | 骨骼变换、四元数插值 | 迭代38,49 | Slerp旋转 |
| 粒子系统 | 向量运动 | 迭代6 | 加速度积分 |

### 计算机图形学

| 应用场景 | 涉及知识点 | 迭代 |
|---------|-----------|------|
| 模型加载 | 矩阵变换 | 迭代26 |
| 光照计算 | 法线、点积 | 迭代5 |
| 阴影贴图 | 投影矩阵 | 迭代28 |
| 骨骼动画 | 矩阵层级 | 迭代49 |
| 网格变形 | 矩阵变换 | 迭代49 |
| 光线追踪 | 射线-几何求交 | 迭代50 |

### 数据科学

| 应用场景 | 涉及知识点 | 迭代 |
|---------|-----------|------|
| 数据降维 | PCA | 迭代44 |
| 图像压缩 | SVD | 迭代43 |
| 线性回归 | 最小二乘 | 迭代25 |
| 协方差矩阵 | 对称矩阵 | 迭代41 |

---

## 代码组织

### 核心模块

```
src/core/
├── vector2d.py       # 2D向量类 (迭代1-3)
├── vector3d.py       # 3D向量类 (迭代4-6)
├── matrix.py         # 矩阵类 (迭代11,21-25)
└── quaternion.py     # 四元数类 (迭代36-40)
```

### 图形模块

```
src/graphics/
├── transform2d.py    # 2D变换 (迭代12-15)
├── transform3d.py    # 3D变换 (迭代16-20)
├── camera.py         # 相机系统 (迭代27,30)
└── projection.py     # 投影矩阵 (迭代28-29)
```

### 可视化模块

```
src/visualization/
├── vector_plot.py    # 向量绘制工具
├── matrix_plot.py    # 矩阵可视化
└── animation.py      # 动画工具
```

### 示例代码

```
src/examples/
├── iter01_vector2d_basic.py
├── iter02_vector_addition.py
├── ...
└── iter50_ray_tracing.py
```

---

## 常见问题速查

### Q: 如何判断两个向量是否垂直?

**迭代3** - 使用点积: `a.dot(b) ≈ 0`

### Q: 如何计算两个向量的夹角?

**迭代3** - `angle = acos(a.dot(b) / (a.magnitude() * b.magnitude()))`

### Q: 如何旋转一个3D物体?

**迭代16** - 使用旋转矩阵 或 **迭代37** - 使用四元数

### Q: 如何避免万向锁?

**迭代40** - 使用四元数代替欧拉角

### Q: 如何实现平滑旋转动画?

**迭代38** - 使用四元数的Slerp插值

### Q: 如何判断点在物体前面还是后面?

**迭代3** - 点积: `(point - center).dot(forward) > 0` 为前面

### Q: 如何计算三角形的法线?

**迭代5** - 叉积: `normal = (edge1.cross(edge2)).normalize()`

### Q: 如何实现相机LookAt?

**迭代27** - 构建正交坐标系,创建视图矩阵

### Q: 透视投影和正交投影有什么区别?

**迭代28-29** - 透视有近大远小,正交保持比例

### Q: 如何把世界坐标转为屏幕坐标?

**迭代31** - MVP变换: `screen = Projection * View * Model * world_pos`

---

## 学习路径建议

### 快速入门路径 (核心迭代)

适合想快速掌握VR开发必备知识的学习者:

1. **向量基础**: 迭代1-6
2. **矩阵核心**: 迭代11-12, 15-16
3. **相机系统**: 迭代27-28
4. **四元数**: 迭代36-38

### 完整学习路径

按《迭代计划详解.md》顺序完成所有50个迭代

### 专题深入路径

选择感兴趣的专题深入学习:
- **图形专题**: 迭代26-35, 50
- **动画专题**: 迭代36-40, 49
- **数学专题**: 迭代21-25, 41-45

---

## 术语对照表

| 中文 | 英文 | 缩写 | 首次出现 |
|------|------|------|---------|
| 向量 | Vector | - | 迭代1 |
| 模/范数 | Magnitude/Norm | - | 迭代1 |
| 单位向量 | Unit Vector | - | 迭代1 |
| 归一化 | Normalize | - | 迭代1 |
| 点积 | Dot Product / Inner Product | - | 迭代3 |
| 叉积 | Cross Product / Outer Product | - | 迭代5 |
| 矩阵 | Matrix | - | 迭代11 |
| 行列式 | Determinant | det | 迭代21 |
| 逆矩阵 | Inverse Matrix | - | 迭代21 |
| 转置 | Transpose | T | 迭代11 |
| 齐次坐标 | Homogeneous Coordinates | - | 迭代15 |
| 四元数 | Quaternion | - | 迭代36 |
| 欧拉角 | Euler Angles | - | 迭代17 |
| 万向锁 | Gimbal Lock | - | 迭代17 |
| 视场角 | Field of View | FOV | 迭代28 |
| 特征值 | Eigenvalue | λ | 迭代41 |
| 特征向量 | Eigenvector | - | 迭代41 |
| 主成分分析 | Principal Component Analysis | PCA | 迭代44 |
| 奇异值分解 | Singular Value Decomposition | SVD | 迭代43 |

---

## 更新日志

- 2025-11-13: 初始版本创建,包含迭代1-50的知识点映射

---

**使用提示**:
- 使用 Ctrl+F (Cmd+F) 快速搜索关键词
- 每完成一个迭代,回到这里复习对应的知识点
- 在实际VR开发中遇到问题,查找"应用场景索引"
